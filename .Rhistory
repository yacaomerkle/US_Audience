if (temp[i,j]=='NULL'||is.na(temp[i,j])==TRUE)  temp[i,j]<-'0'
}
}
temp=data.frame(temp)
for (i in 7:dim(temp)[2]){ temp[,i]<-as.numeric(as.character(temp[,i]))}
postdata=data.frame(temp)
tmp<-ddply(postdata,.(campaign,fy_name,fm,rad,enterprise_segment),numcolwise(sum))
View(tmp)
a<-ddply(tmp,.(),numcolwise(sum))
head(a)
View(a)
a<-a[-1]
head(a)
View(tmp)
View(a)
shiny::runApp('LCM/lcm2')
tmp<-postdata
tmp<-ddply(tmp,.(),numcolwise(sum))
tmp<-tem[-1]
category<-c('Interval','Cumulative')
Metrix<-c("RID Initial","BAU DM","Trigger DM","All DM","DM Cost","RID Mailed","Resp","Rev","Mrg")
c_list<-c('0-90','90-180','180-270','270-360','450-540','540-630','630-720')
c_list2<-c('90','180','270','360','540','630','720')
mat<-matrix(0,18,8)
for (i in 1:18){for (j in 1:8){
if (i=1||i=9){
mat[i,j]<-tmp[i]
}
if(i %in% c(2,3,4,5,6,7,8)){
mat[i,j]<-tmp[-1][j+8*(i-1)]
}
mat[i,j]<-tmp[-1][j+8*(i-2)
}
}
tmp<-postdata
tmp<-ddply(tmp,.(),numcolwise(sum))
tmp<-tmp[-1]
category<-c('Interval','Cumulative')
Metrix<-c("RID Initial","BAU DM","Trigger DM","All DM","DM Cost","RID Mailed","Resp","Rev","Mrg")
c_list<-c('0-90','90-180','180-270','270-360','450-540','540-630','630-720')
c_list2<-c('90','180','270','360','540','630','720')
mat<-matrix(0,18,8)
for (i in 1:18){for (j in 1:8){
if (i=1||i=9){
mat[i,j]<-tmp[i]
}
if(i %in% c(2,3,4,5,6,7,8)){
mat[i,j]<-tmp[-1][j+8*(i-1)]
}
mat[i,j]<-tmp[-1][j+8*(i-2)
}
}
for (i in 1:18){for (j in 1:8){
if (i=1||i=9){
mat[i,j]<-tmp[i]
}
if(i %in% c(2,3,4,5,6,7,8)){
mat[i,j]<-tmp[-1][j+8*(i-1)]
}
mat[i,j]<-tmp[-1][j+8*(i-2)]
}
}
for (i in 1:18){for (j in 1:8){
if (i=1||i=9){
mat[i,j]<-tmp[i]
}
if(i %in% c(2,3,4,5,6,7,8)){
mat[i,j]<-tmp[1,(j+1)+8*(i-1)]
}
mat[i,j]<-tmp[1,((j+1))+8*(i-2)]
}
}
mat<-matrix(0,18,8)
for (i in 1:18){
for (j in 1:8){
if (i=1||i=9){
mat[i,j]<-tmp[1]
}
if(i %in% c(2,3,4,5,6,7,8)){
mat[i,j]<-tmp[1,(j+1)+8*(i-1)]
}
mat[i,j]<-tmp[1,((j+1))+8*(i-2)]
}
}
str(tmp)
for (i in 1:18){
for (j in 1:8){
if (i=1||i=9){
mat[i,j]<-tmp[1,1]
}
if(i %in% c(2,3,4,5,6,7,8)){
mat[i,j]<-tmp[1,(j+1)+8*(i-1)]
}
mat[i,j]<-tmp[1,((j+1))+8*(i-2)]
}
}
tmp<-postdata
tmp<-ddply(tmp,.(),numcolwise(sum))
tmp<-as.vector(tmp[-1])
str(tmp)
View(tmp)
tmp[1,(j+1)+8*(i-1)]
for (i in 1:18){
for (j in 1:8){
if (i=1||i=9){
mat[i,j]<-tmp[1,1]
}
if(i %in% c(2,3,4,5,6,7,8)){
mat[i,j]<-tmp[1,(j+1)+8*(i-1)]
}
else
mat[i,j]<-tmp[1,((j+1))+8*(i-2)]
}
}
for (i in 1:18){
for (j in 1:8){
if (i==1||i==9){
mat[i,j]<-tmp[1,1]
}
if(i %in% c(2,3,4,5,6,7,8)){
mat[i,j]<-tmp[1,(j+1)+8*(i-1)]
}
else
mat[i,j]<-tmp[1,((j+1))+8*(i-2)]
}
}
for (i in 1:18){
for (j in 1:8){
if (i==1||i==9){
mat[i,j]<-tmp[1,1]
}
if(i<=8&&i>=2){
mat[i,j]<-tmp[1,(j+1)+8*(i-1)]
}
else
mat[i,j]<-tmp[1,((j+1))+8*(i-2)]
}
}
for (i in 1:18){
for (j in 1:8){
if (i==1||i==9){
mat[i,j]<-tmp[1,1]
}
if(i<=8&&i>=2){
mat[i,j]<-tmp[1,(j+1)+8*(i-2)]
}
else
mat[i,j]<-tmp[1,((j+1))+8*(i-3)]
}
}
a<-1
for (i in 1:18){
for (j in 1:8){
if (i==1||i==9){
mat[i,j]<-tmp[1,1]
}
else
{a<-a+1
mat[i,j]<-tmp[1,a]
}
}
}
tmp[1,(j+1)+8*(i-1)
)
for (i in 1:18){
for (j in 1:8){
if (i==1||i==9){
mat[i,j]<-tmp[1,1]
}
else
{a<-a+1
mat[i,j]<-tmp[1,a]
}
}
}
mat<-matrix(0,18,8)
a<-1
for (i in 1:18){
for (j in 1:8){
if (i==1||i==9){
mat[i,j]<-tmp[1,1]
}
else
{a<-a+1
mat[i,j]<-tmp[1,a]
}
}
}
mat
tmp<-postdata
tmp<-ddply(tmp,.(),numcolwise(sum))
tmp<-as.vector(tmp[-1])
category<-c('Interval','Cumulative')
Metrix<-c("RID Initial","BAU DM","Trigger DM","All DM","DM Cost","RID Mailed","Resp","Rev","Mrg")
c_list<-c('0-90','90-180','180-270','270-360','450-540','540-630','630-720')
c_list2<-c('90','180','270','360','540','630','720')
mat<-matrix(0,18,8)
a<-1
for (i in 1:18){
for (j in 1:8){
if (i==1||i==9){
mat[i,j]<-tmp[1,1]
}
else
{a<-a+1
mat[i,j]<-tmp[1,a]
}
}
}
View(tmp)
tmp<-postdata
tmp<-ddply(tmp,.(),numcolwise(sum))
tmp<-as.vector(tmp[,-1])
category<-c('Interval','Cumulative')
Metrix<-c("RID Initial","BAU DM","Trigger DM","All DM","DM Cost","RID Mailed","Resp","Rev","Mrg")
c_list<-c('0-90','90-180','180-270','270-360','450-540','540-630','630-720')
c_list2<-c('90','180','270','360','540','630','720')
mat<-matrix(0,18,8)
a<-1
for (i in 1:18){
for (j in 1:8){
if (i==1||i==9){
mat[i,j]<-tmp[1,1]
}
else
{a<-a+1
mat[i,j]<-tmp[1,a]
}
}
}
View(tmp)
View(mat)
tmp[1,57]
tmp[1,58]
tmp[1,66]
tmp[1,74]
tmp[1,58+8*(1:5)]
##Part1 Enter Data Pre
enterdata<-read.csv("C:/Users/YACAO/Documents/R/shiny/data/enter_data.csv",header=TRUE)
enterdata$date<-as.character(enterdata$fy_name*100+enterdata$month_number_in_fy)
enterdata$month_number_in_fy<-NULL
enterdata$rev<-as.numeric(enterdata$rev)
enterdata$mrg<-as.numeric(enterdata$mrg)
enterdata$sub_seg[enterdata$sub_seg==""]  <- NA
enterdata <- na.omit(enterdata)
###Part2 Post data pre
postdata<-read.csv("C:/Users/YACAO/Documents/R/shiny/data/post_data.csv",header=TRUE)
postdata$enterprise_segment<-as.character(postdata$enterprise_segment)
postdata$enterprise_segment<-ifelse(postdata$enterprise_segment %in% c('NULL',''), 'Unk', postdata$enterprise_segment)
postdata$rad<-as.character(postdata$rad)
postdata$rad<-ifelse(postdata$rad == "", 'Unk', postdata$rad)
postdata$enterprise_segment <- as.factor(postdata$enterprise_segment)
postdata$rad <- as.factor(postdata$rad)
temp<-as.matrix(postdata)
for (i in 1:dim(temp)[1]){
for (j in 1:dim(temp)[2]){
if (temp[i,j]=='NULL'||is.na(temp[i,j])==TRUE)  temp[i,j]<-'0'
}
}
temp=data.frame(temp)
for (i in 8:dim(temp)[2]){ temp[,i]<-as.numeric(as.character(temp[,i]))}
postdata=data.frame(temp)
Window<-c(90,180,270,360,450,540,630,720)
shiny::runApp('LCM/lcm1 v2')
shiny::runApp('LCM/lcm1 v2')
shiny::runApp('LCM/lcm1 v2')
?sliderInput
shiny::runApp('LCM/lcm1 v2')
shiny::runApp('LCM/lcm1 v2')
shiny::runApp('LCM/lcm1 v2')
shiny::runApp('LCM/lcm1 v2')
shiny::runApp('LCM/lcm1 v2')
shiny::runApp('LCM/lcm1 v2')
shiny::runApp('LCM/lcm1 v2')
shiny::runApp('LCM/lcm1 v2')
shiny::runApp('LCM/lcm1 v2')
shiny::runApp('LCM/lcm1 v2')
shiny::runApp('LCM/lcm1 v2')
shiny::runApp('LCM/lcm1 v2')
shiny::runApp('LCM/lcm1 v2')
shiny::runApp('LCM/lcm1 v2')
shiny::runApp('LCM/lcm1 v2')
shiny::runApp('LCM/lcm1 v2')
shiny::runApp('LCM/lcm1 v2')
shiny::runApp('LCM/lcm1 v2')
shiny::runApp('LCM/lcm1 v2')
shiny::runApp('LCM/lcm1 v2')
shiny::runApp('LCM/lcm1 v2')
shiny::runApp('LCM/lcm1 v2')
shiny::runApp('LCM/lcm1 v2')
shiny::runApp('LCM/lcm1 v2')
shiny::runApp('LCM/lcm1 v2')
shiny::runApp('LCM/lcm1 v2')
shiny::runApp('LCM/lcm1 v2')
shiny::runApp('LCM/lcm1 v2')
shiny::runApp('LCM/lcm1 v2')
shiny::runApp('LCM/lcm1 v2')
shiny::runApp('LCM/lcm1 v2')
shiny::runApp('LCM/lcm1 v2')
shiny::runApp('LCM v1/test1_1')
Data<- read.csv('C:/Users/YACAO/Desktop/LCM Forcast/FY18 Q2 Forecast/FY18Q1.csv')
library(reshape2)
data_out_1<-melt(Data,id=c("Metric","Campaign"))
Data_out_2<-dcast(Data_out,Campaign+variable~Metric)
data_out<-Data_out_2
data_out$Fy_name<-2017
data_out$fy_name<-'Q4'
data_out$fy_week<-substr(Data_out_2$variable,2,3)
data_out<-data_out[,c(1,7,8,9,3,4,5,6)]
write.csv(data_out,file="C:/Users/YACAO/Desktop/LCM Forcast/FY18 Q2 Forecast/FY18Q1_out.csv")
Data<- read.csv('C:/Users/YACAO/Desktop/LCM Forcast/FY18 Q2 Forecast/FY18Q1.csv')
Data<- read.csv('C:/Users/YACAO/Desktop/NA Ad Hoc/LCM Forcast/FY18 Q2 Forecast/FY18Q1.csv')
library(reshape2)
data_out_1<-melt(Data,id=c("Metric","Campaign"))
Data_out_2<-dcast(Data_out,Campaign+variable~Metric)
data_out<-Data_out_2
data_out$Fy_name<-2017
data_out$fy_name<-'Q4'
data_out$fy_week<-substr(Data_out_2$variable,2,3)
data_out<-data_out[,c(1,7,8,9,3,4,5,6)]
write.csv(data_out,file="C:/Users/YACAO/Desktop/NA Ad Hoc/LCM Forcast/FY18 Q2 Forecast/FY18Q1_out.csv")
Data<- read.csv('C:/Users/YACAO/Desktop/NA Ad Hoc/LCM Forcast/FY18 Q2 Forecast/FY18Q1.csv')
library(reshape2)
data_out_1<-melt(Data,id=c("Metric","Campaign"))
Data_out_2<-dcast(Data_out,Campaign+variable~Metric)
Data<- read.csv('C:/Users/YACAO/Desktop/NA Ad Hoc/LCM Forcast/FY18 Q2 Forecast/FY18Q1.csv')
library(reshape2)
data_out_1<-melt(Data,id=c("Metric","Campaign"))
Data_out_2<-dcast(Data_out_1,Campaign+variable~Metric)
data_out<-Data_out_2
data_out$Fy_name<-2017
data_out$fy_name<-'Q4'
data_out$fy_week<-substr(Data_out_2$variable,2,3)
data_out<-data_out[,c(1,7,8,9,3,4,5,6)]
write.csv(data_out,file="C:/Users/YACAO/Desktop/NA Ad Hoc/LCM Forcast/FY18 Q2 Forecast/FY18Q1_out.csv")
Data<- read.csv('C:/Users/YACAO/Desktop/NA Ad Hoc/LCM Forcast/FY18 Q2 Forecast/FY18Q1.csv')
library(reshape2)
data_out_1<-melt(Data,id=c("Metric","Campaign"))
View(data_out_1)
View(data_out_1)
Data_out_2<-dcast(data_out_1,Campaign+variable~Metric)
data_out<-Data_out_2
data_out$Fy_name<-2017
data_out$fy_name<-'Q4'
data_out$fy_week<-substr(Data_out_2$variable,2,3)
data_out<-data_out[,c(1,7,8,9,3,4,5,6)]
write.csv(data_out,file="C:/Users/YACAO/Desktop/NA Ad Hoc/LCM Forcast/FY18 Q2 Forecast/FY18Q1_out.csv")
View(data_out)
View(data_out)
Data<- read.csv('C:/Users/YACAO/Desktop/NA Ad Hoc/LCM Forcast/FY18 Q2 Forecast/FY18Q1.csv')
library(reshape2)
data_out_1<-melt(Data,id=c("Metric","Campaign"))
Data_out_2<-dcast(data_out_1,Campaign+variable~Metric)
data_out<-Data_out_2
data_out$Fy_name<-2018
data_out$fy_name<- ifelse(fy_week<=4,'Q1','Q2')
data_out$fy_week<-substr(Data_out_2$variable,2,3)
data_out<-data_out[,c(1,7,8,9,3,4,5,6)]
write.csv(data_out,file="C:/Users/YACAO/Desktop/NA Ad Hoc/LCM Forcast/FY18 Q2 Forecast/FY18Q1_out.csv")
Data<- read.csv('C:/Users/YACAO/Desktop/NA Ad Hoc/LCM Forcast/FY18 Q2 Forecast/FY18Q1.csv')
library(reshape2)
data_out_1<-melt(Data,id=c("Metric","Campaign"))
Data_out_2<-dcast(data_out_1,Campaign+variable~Metric)
data_out<-Data_out_2
data_out$Fy_name<-2018
data_out$fy_week<-substr(Data_out_2$variable,2,3)
data_out$fq_name<- ifelse(fy_week<=4,'Q1','Q2')
data_out<-data_out[,c(1,7,8,9,3,4,5,6)]
write.csv(data_out,file="C:/Users/YACAO/Desktop/NA Ad Hoc/LCM Forcast/FY18 Q2 Forecast/FY18Q1_out.csv")
Data<- read.csv('C:/Users/YACAO/Desktop/NA Ad Hoc/LCM Forcast/FY18 Q2 Forecast/FY18Q1.csv')
library(reshape2)
data_out_1<-melt(Data,id=c("Metric","Campaign"))
Data_out_2<-dcast(data_out_1,Campaign+variable~Metric)
data_out<-Data_out_2
data_out$Fy_name<-2018
data_out$fy_week<-substr(Data_out_2$variable,2,3)
data_out$fq_name<- ifelse(data_out$fy_week<=4,'Q1','Q2')
data_out<-data_out[,c(1,7,8,9,3,4,5,6)]
write.csv(data_out,file="C:/Users/YACAO/Desktop/NA Ad Hoc/LCM Forcast/FY18 Q2 Forecast/FY18Q1_out.csv")
Data<- read.csv('C:/Users/YACAO/Desktop/NA Ad Hoc/LCM Forcast/FY18 Q2 Forecast/FY18Q1.csv')
library(reshape2)
data_out_1<-melt(Data,id=c("Metric","Campaign"))
Data_out_2<-dcast(data_out_1,Campaign+variable~Metric)
data_out<-Data_out_2
data_out$Fy_name<-2018
data_out$fy_week<-substr(Data_out_2$variable,2,3)
View(data_out)
View(data_out)
data_out$fq_name<- ifelse(data_out$fy_week<=4,'Q1','Q2')
data_out<-data_out[,c(1,7,8,9,3,4,5,6)]
write.csv(data_out,file="C:/Users/YACAO/Desktop/NA Ad Hoc/LCM Forcast/FY18 Q2 Forecast/FY18Q1_out.csv")
write.csv(data_out,file="C:/Users/YACAO/Desktop/NA Ad Hoc/LCM Forcast/FY18 Q2 Forecast/FY18Q1_out.csv")
Data<- read.csv('C:/Users/YACAO/Desktop/NA Ad Hoc/LCM Forcast/FY18 Q2 Forecast/FY18Q1.csv')
library(reshape2)
data_out_1<-melt(Data,id=c("Metric","Campaign"))
Data_out_2<-dcast(data_out_1,Campaign+variable~Metric)
data_out<-Data_out_2
data_out$Fy_name<-2018
data_out$fy_week<-substr(Data_out_2$variable,2,3)
data_out$fq_name<- ifelse(data_out$fy_week<=13,'Q1','Q2')
data_out<-data_out[,c(1,7,8,9,3,4,5,6)]
write.csv(data_out,file="C:/Users/YACAO/Desktop/NA Ad Hoc/LCM Forcast/FY18 Q2 Forecast/FY18Q1_out.csv")
Data<- read.csv('C:/Users/YACAO/Desktop/NA Ad Hoc/LCM Forcast/FY18 Q2 Forecast/FY18Q1.csv')
library(reshape2)
data_out_1<-melt(Data,id=c("Metric","Campaign"))
Data_out_2<-dcast(data_out_1,Campaign+variable~Metric)
data_out<-Data_out_2
data_out$Fy_name<-2018
data_out$fy_week<-substr(Data_out_2$variable,2,3)
View(data_out)
View(data_out)
data_out$fq_name<- ifelse(data_out$fy_week<=13,'Q1','Q2')
data_out<-data_out[,c(1,7,8,9,3,4,5,6)]
write.csv(data_out,file="C:/Users/YACAO/Desktop/NA Ad Hoc/LCM Forcast/FY18 Q2 Forecast/FY18Q1_out.csv")
ls(data_out)
str(data_out)
Data<- read.csv('C:/Users/YACAO/Desktop/NA Ad Hoc/LCM Forcast/FY18 Q2 Forecast/FY18Q1.csv')
library(reshape2)
data_out_1<-melt(Data,id=c("Metric","Campaign"))
Data_out_2<-dcast(data_out_1,Campaign+variable~Metric)
data_out<-Data_out_2
data_out$Fy_name<-2018
data_out$fy_week<-as.numeric(substr(Data_out_2$variable,2,3))
data_out$fq_name<- ifelse(data_out$fy_week<=13,'Q1','Q2')
data_out<-data_out[,c(1,7,8,9,3,4,5,6)]
write.csv(data_out,file="C:/Users/YACAO/Desktop/NA Ad Hoc/LCM Forcast/FY18 Q2 Forecast/FY18Q1_out.csv")
shiny::runApp('Contact Piovt/demo_v6')
shiny::runApp('Audience Sizing/demo')
shiny::runApp('Audience Sizing/demo')
shiny::runApp('Audience Sizing/demo')
shiny::runApp('Audience Sizing/demo')
shiny::runApp('Audience Sizing/demo')
shiny::runApp('Audience Sizing/demo')
shiny::runApp('Audience Sizing/demo')
shiny::runApp('Audience Sizing/demo')
tmp<-rawdata
measure_cnt<-1
dimension_cnt<-dim(tmp)[2]-measure_cnt
Dimension_name<-names(tmp)[1:dimension_cnt]
tmp<-ddply(tmp,Dimension_name,numcolwise(sum))
View(tmp)
View(tmp)
shiny::runApp('Audience Sizing/demo')
shiny::runApp('Audience Sizing/demo')
shiny::runApp('Audience Sizing/demo')
shiny::runApp('Audience Sizing/demo')
shiny::runApp('Audience Sizing/demo')
str(rawdata)
shiny::runApp('Audience Sizing/demo')
shiny::runApp('Audience Sizing/demo')
shiny::runApp('Audience Sizing/demo')
shiny::runApp('Audience Sizing/demo')
shiny::runApp('Audience Sizing/demo')
shiny::runApp('Audience Sizing/demo')
shiny::runApp('Audience Sizing/demo')
shiny::runApp('Audience Sizing/demo')
shiny::runApp('Audience Sizing/demo')
shiny::runApp('Audience Sizing/demo')
shiny::runApp('Audience Sizing/demo')
shiny::runApp('Audience Sizing/demo')
shiny::runApp('Audience Sizing/demo')
shiny::runApp('Audience Sizing/demo')
shiny::runApp('Audience Sizing/demo')
tmp<-Null
print(tmp)
tmp
tmp<-NULL
print(tmp)
tmp<-""
print(tmp)
tmp<-NULL
print(tmp)
shiny::runApp('Audience Sizing/demo')
shiny::runApp('Audience Sizing/demo')
shiny::runApp('Audience Sizing/demo')
shiny::runApp('Audience Sizing/demo')
shiny::runApp('Audience Sizing/demo')
shiny::runApp('Audience Sizing/demo')
shiny::runApp('Audience Sizing/demo')
shiny::runApp('Audience Sizing/demo')
shiny::runApp('Contact Piovt/demo_v6')
library(rsconnect)
rsconnect::setAccountInfo(name='yacao1991',token='6B11C714EC613C7B98E4D34CC3A1501B', secret='hvjvQvtT01OLcQLrD9dC3D/foSYTVK11WWq5880z')
rsconnect::deployApp(account="yacao1991","C:/Users/YACAO/Documents/R/shiny/Audience Sizing/demo")
shiny::runApp('Audience Sizing/demo')
library(shiny)
library(ggplot2)
library(plyr)
library(googleVis)
# library(shinyapps)
library(scales)
library(reshape2)
# library(rjson)
#
### Raw Data Pre
setwd("C:/Users/YACAO/Documents/R/shiny/Audience Sizing/demo")
# rawdata<-read.csv("Raw_Data.csv",header=TRUE)
# save(rawdata,file="rawdata.Rdata")
load("rawdata.Rdata")
rawdata<-audeince.data
# str(rawdata)
for (i in 1:12)
{rawdata[,i]<-as.character(rawdata[,i])}
rawdata$da_flag<-ifelse(rawdata$rad_6 %in% c('6.Greenfield'),'N',rawdata$da_flag)
rawdata$dfs_segment<-ifelse(rawdata$rad_6 %in% c('6.Greenfield','4.Inquirer','5.Retail'),'None',rawdata$dfs_segment)
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
library(rsconnect)
rsconnect::setAccountInfo(name='yacao1991',token='6B11C714EC613C7B98E4D34CC3A1501B', secret='hvjvQvtT01OLcQLrD9dC3D/foSYTVK11WWq5880z')
rsconnect::deployApp(account="yacao1991","C:/Users/YACAO/Documents/R/shiny/Audience Sizing/demo")
